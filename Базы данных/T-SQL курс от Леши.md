[основа](https://www.youtube.com/watch?v=LFqbtk-Mi-M&list=PLDYqU5RH_aX2tA6WbSmcvKu-V_FQzGGYx&index=5)
# 1. Писать код исходя из внутреннего устройства MS SQL
Гипотетическая ситуация - берем обычный веб сервер, которому необходимо заполнить данные по веб форме. Веб сервер обрабатывает каждую строку по отдельности. 
В ситуации, когда нам необходимо обрабатывать данные в MS-SQL в отдельно взятой таблице, движок MS SQL не обрабатывает каждую строку отдельно (например у нас есть таблица на несколько миллионов строк), он применяет эту операцию ко всей таблице по указанным условиям. Автор указывает на то, что чем лучше мы будем понимать внутрянку MS SQL, тем проще нам будет писать эффективные запросы.

Если же мы возьмем обработку таблицы на 50 млн строк, то применять отдельную обработку для каждой строки довольно энергозатратно. Поэтому движок MS SQL работает в другой парадигме - *вместо обработки каждой строки, он обрабатывает всю таблицу*.

```sql
insert Destination
select
case when n>10
	then 10
	else n
	end,
from Source
```
# 2. Скепсис при данных и даты
В случае если мы делаем выборку данных по запросу от заказчика, то у заказчика может возникнуть вопрос, о том, что в выборке пропущены какие либо данные.
В этих случаях автор советует провести *разведочный анализ данных*, чтобы сразу показать, в каком диапазоне мы получили данные.
Для примера мы берём выборку чисел от 1 до 100, которые будут символизировать %. И к ней через JOIN цепляем значения, которые нашли. Таким образом мы сразу продемонстрируем в каком диапазоне у нас хранятся значения.

```sql
-- в данном примере мы находим хп всех монстров и связываем их с нашим процентным массивом и затем считаем их количество чтобы сразу показать заказчку
Select count(monsterID) as CT, n.N as MonsterHP
from dbo.Number AS n
left join dbo.Monster AS m 
on m.MonsterHP = n.N
where n.N <= 100
Group By n.N
Order By n.N
```
