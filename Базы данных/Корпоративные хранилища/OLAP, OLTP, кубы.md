[[DWH и его виды (терминология)]]

# Если коротко
[Источник](https://www.youtube.com/watch?v=oF_2uDb7DvQ&ab_channel=codebasics)
![[Pasted image 20240629162754.png]]
OLAP - (online analytic processing) система для выполнения многомерного анализа данных с высокой скоростью на больших объемах данных. Идеально подходит для интеллектуального анализа данных, бизнес-аналитики и сложных аналитических вычислений.
Пример - провести анализ продаж за 10 лет. Postgres выдаст ответ минут через 10. А OLAP система через несколько секунд. Причина в том, что там данные хранятся по другому принципу, там много всяких оптимизаций (Колоночные базы данных). Redshift, BigQuery.

OLTP - online transaction processing, позволяет выполнять большое количество транзакций базы данных в режиме реального времени большим количеством людей, как правило, через Интернет.
Например в Озоне найти смартфоны, ноутбуки, телефоны и так далее (множество маленьких запросов). 
## Аналитические базы данных
Аналитические базы данных - базы данных, которые работают по принципу OLAP.
Имеется условное деление на OLAP и OLTP.

# OLAP
[Источник 1](https://www.youtube.com/watch?v=zA4d6UtRUg4&ab_channel=ListenIT)
[Источник 2]((https://youtu.be/DzSG8T9q9IM?t=643)
[Источник 3](https://www.youtube.com/watch?v=JU8sJf2V1Mw)
## Определение
*OLAP* - система анализа данных, позволяющая для бизнеса выбирать интересующие его данные быстро. OLAP опирается на многомерный анализ данных.
Расшифровка проще справа налево:
*Processing* - обрабатываются некоторые исходные данные
*Analytical* - чтобы получить какие-то аналитические отчеты или новые знания
*OnLine* - в реальном времени, практически без задержек.
## Структура OLAP
### Бизнесовая
- много данных;
- проработанные механизмы сбора и обработки данных;
- высокопроизводительные системы для их хранения и анализа;
- наглядные BI системы для отображения информации;
### Техническая
- Большие объемы данных;
- Источники данных различные - реляционные, многомерные и т.д. Но чаще столбцовые СУБД. 
- Выборка данных происходит быстро;
- в центре таблица фактов, в которой находятся все показатели (сумма, количество) и ссылки на справочники;
- чем больше столбцов, тем ниже скорость выполнения операций над строками (добавление изменение данных);
- больше про денормализацию. Разбиение данных на определенные блоки и сущности связанные с собой по определенному принципу;


OLAP бывают разные:
- система которая ничего напрямую не хранит, но может быстро вынимать данные из разных мест и в правильном виде показывать менеджерам - это хорошо работает, когда данные разложены по однотипным СУБД, например все данные лежат в PostgreSql - это Relational OLAP (ROLAP) - OLAP который построен на отношениях таблиц и баз данных между собой.
- Если данные лежат в разнородных источниках, то нужен отдельный сервер для предварительной подготовки данных - Multidimensional OLAP (MOLAP).
- Гибрид 1 и 2 - часть данных проще достать через запросы в БД, а часть надо предварительно подготовить через многомерный OLAP.
### Принцип действия
![[Pasted image 20250121172013.png]]
Итого: OLAP содержит уже агрегированную информацию из БД источника, как SQL, так и NoSQL благодаря ELT/ETL/EtLT. *Информация содержится в кубах.* Что мы можем делать с этими кубами:
- roll-up - обобщение данных по измерениям;
- drill-down - углубление во временном периоде;
- slice - выбор определенного отображения;
- dice - выбор данных из нескольких измерений;
- pivot - поворот осей данных куба;

Преимущество OLAP – предоставить быстрый срез, аналитику, когда это необходимо, но сразу записывать информацию в OLAP невыгодно, так как она достаточно медленная. И проще записывать в реляционные. Поэтому OLAP используют в качестве аналитики уже агрегированной инфы.
#### Куб данных - разновидность OLAP
То как я понимаю, кубы являются разновидностью OLAP.
В общих чертах куб данных — это дизайн-паттерн, в котором показатели, например продажи, агрегируются по разным разрезам: региону, магазину или продукту. Дизайн-паттерн реализован в основном в двух контекстах: 
1. Как предварительно агрегированная таблица в реляционной базе данных.
2. Как объект данных в специализированной OLAP-системе.
  
В обоих контекстах кубы данных должны помогать бизнес-аналитикам предварительно упаковывать и агрегировать важные для стейкхолдеров показатели.
![[Pasted image 20250121172125.png]]

#### Виды OLAP систем
ROLAP - relational OLAP (построен на отношениях таблиц и БД между собой):
- система напрямую ничего не хранит, но быстро вынимает все необходимое;
- данные разложены по однотипным СУБД (PostgreSQL и т.д.);
- достаточно редко встречаются;

MOLAP - multidimensional OLAP (данные лежат не только в однотипных БД, поэтому надо все собирать и складировать вместе):
- предварительная подготовка данных;
- позволяет структурировать данные под различные запросы пользователей;

Гибрид ROLAP и MOLAP

![[Pasted image 20250121173732.png]]
# OLTP
OnLine Transactional Processing
Для одних задач все еще используется OLTP, но в части случаев бизнес уже перешел на OLAP.
В большинстве используется в реляционных БД:
- Одновременное выполнение нескольких транзакций (экономических, финансовых, цифрового взаимодействия), таких как интернет-банкинг, покупки, ввод заказов, отправка сообщений;
- задача - ввод, редактирование, удаление данных в режиме онлайн и их хранение. Быстро принимать информацию, но не анализировать;
- больше про нормализацию;

## Особенности OLTP
- Нормализованные данные;
- Высокая интенсивность добавления и изменения данных;
- Большое количество одновременно активных пользователей;
- Внесение данных и расчеты осуществляют пользователи системы;
- Содержит актуальные данные;
- OLTP использует транзакции, которые включат небольшие объемы данных;
- Индексированные данные в базе данных могут быть легко доступны;
- Трехуровневая архитектура, которая обычно состоит из уровня:
	- представление;
	- бизнес-логика;
	- хранилище данных;
![[Pasted image 20250121180237.png]]
# OLAP vs OLTP
Каждая система оптимизирована под выполнение своих функций.
OLAP для комплексного анализа данных с целью принятия более разумных решений.
OLTP оптимизрован для большого количества транзакций.
### Фокус
OLAP позволяет извлекать данные для сложного анализа.
OLTP идеально подходит для выполнения простых обновлений, вставок и удалений в БД.
### Источники данных
БД OLAP может поддерживать сложные запросы множества фактов данных из текущих и исторических данных. Различные БД OLTP могут быть источником информации.
OLTP используют традиционную СУБД для размещения большого объема транзакций в режиме реального времени.
### Время обработки
В OLAP время отклика на порядки медленнее, чем в OLTP. Рабочие нагрузки требуют интенсивного чтения и включают огромные наборы данных.
Для транзакций и ответов OLTP важна каждая миллисекунда. Рабочие нагрузки включают простые операции чтения и записи через SQL, требуя меньше времени для хранения.

### Доступность
Поскольку они не изменяют текущие данные резервное копирование OLAP выполняется реже.
OLTP системы часто изменяют данные, они требуют частого или параллельного резервного копирования для поддержания целостности данных.

На картинке ниже OLTP готовит данные для OLTP, после того как OLAP провел анализ, он подготавливает витрины для OLTP. Получается закольцовка.
![[Pasted image 20250121175409.png]]

Сейчас все чаще встречаются гибриды OLAP и OLTP.

# Как выбрать
Вам нужна единая платформа для получения информации о бизнесе?
Вам нужно управлять ежедневными операциями?
Вам нужно на постоянной основе обновлять, вставлять, удалять огромные массивы информации?
Вам нужно анализировать полученную из разнородных источников информацию и выдавать валидные бизнес-результаты?

![[Pasted image 20250121182027.png]]
