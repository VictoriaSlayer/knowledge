[[История и архитектура DWH]]
# Вводная
Базы данных развёртывают на собственных серверах или в виде облачного сервиса, который в общем случае называется DBaaS - data base as a service. 
Облачные базы данных выполняют те же функции, что и обычные, однако у них есть несколько преимуществ:
- Любой объем хранения — расширяется в любой момент, без закупки оборудования.
- Отказоустойчивость — встроенное резервирование данных, так что при выходе из строя оборудования всегда остаются резервные копии.
- Повышенная безопасность — DBaaS работают в высоконадежных и защищенных средах, под контролем мощных средств технической защиты и экспертов по безопасности.

Источник - https://www.youtube.com/watch?v=RqBZZ8CeyU0&ab_channel=GDGRostov-on-Don
![[Pasted image 20240723113358.png]]
Информация о любых данных - транзакция, генерирование и т.д. хранится у компании в своей системе.

Основные источники данных:
- CRM;
- ERP;
- IOT;
- соц. сети;
- и много всего прочего;

# Хранилище данных
![[Pasted image 20240723113907.png]]

Data Sources - источники
Staging Area - 
Warehouse
Data Marts - витрины данных
Users

![[Pasted image 20240723114544.png]]
Информация мигрирует между слоями и в процессе миграции очищается и приходит к нормализации.
Необходимо для того, чтобы понимать на каком слое какая ошибка возникла.

Параллельно всем этим слоям идет Service Layer - слой метаданных.
Также осуществляются проверки на отбраковывание аномалий параллельно всему этому процессу.
## Область временного хранения данных
![[Pasted image 20240723115720.png]]
Staging слой - область выгрузки первичных данных. Предназначена для временного хранения данных из систем-источников. Данные хранятся максимально близко к системе источнику. Чтобы сохранить первичные данные максимально неизмененными.

ODS - Operational Data Store - операционный слой первичных данных
Область. Проводятся минимальные проверки и информация сохраняется максимально близко к источникам.
Здесь происходит очистка, трансформация, обогащение, подготовка к загрузке в область постоянного хранения. 
В ODS появляется дельта изменений.

## Область постоянного хранения данных
DDS detail data store - слой детальных данных, ядро хранилища. Данные хранятся в максимально точном, полном виде, откуда аналитики могут использовать информацию. 
Хранит историю изменения сущностей и связей между ними. Отвечает за консолидацию данных между источниками. Имеются проверки ссылочной целостности, полноты данных и т.д.
Данные хранятся в определенной организованной структуре исходя из потребностей

DM datamart - витрины хранилища. Концентрированная информация необходимая по запросу.
Меньший объем данных, упрощенный доступ к данным, сегментирование данных.
В DDS данные максимально нейтральные, в Data Mart могут уже происходить различные агрегации и изменения - специфические расчеты и метрики.

# Итого
Пример ETL процесса
![[Pasted image 20240723120300.png]]

ETL-процесс двигает данные между слоями.

### Итоговая архитектура DWH с ETL
Данные извлекают из систем источников.
Извлеченные данные с помощью ETL-процесса сохраняются в Stagging области.
Данные с помощью ETL процесса извлекаются из Stagging области и преобразовываются по определенным бизнес правилам с сохранением промежуточных результатов в Transform-area ETL процесса.
После преобразования данные загружаются в область оперативного хранения Operating Data Store.
Данные из ODS слоя извлекаются, проверяется ссылочная целостность и загружаются в область детальных данных ядра.
Данные извлекаются из ядра (DDS-слоя), агрегируются, рассчитываются и записываются в Витрины Данных.

Может быть большое количество трансформаций, чтобы поменять первоначальную структуру на итоговую.