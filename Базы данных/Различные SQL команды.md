# N
В T-SQL (Transact-SQL) префикс `N` перед строковым литералом указывает, что строка должна обрабатываться как **Unicode-строка** (тип `NVARCHAR`, `NCHAR` или `NTEXT`).
### Зачем это нужно?
1. **Поддержка Unicode** (многобайтовых символов):
    - Без префикса `N` строка интерпретируется как `VARCHAR` и может некорректно отображать символы за пределами ASCII (например, кириллицу, иероглифы, эмодзи).
    - С префиксом `N` строка хранится в кодировке UTF-16, что позволяет корректно работать с любыми языками.
```sql
INSERT INTO Products (Name) VALUES ('Книга');  -- Может исказить текст, если БД не в UTF-8/Cyrillic.
INSERT INTO Products (Name) VALUES (N'Книга');  -- Работает с любыми символами.
```
# Case
Для применения условной логики в SQL удобно использовать оператор **`CASE`** в рамках запроса **`SELECT`**. Этот оператор аналогичен структуре if-else.

```SQL
SELECT 
	CASE WHEN условие THEN результат 
	ELSE значение_по_умолчанию 
	END 
FROM таблица;
---
SELECT column1, 
	CASE WHEN условие THEN 'РезультатЕслиИстина' 
	ELSE 'РезультатЕслиЛожь' 
	END AS ИмяРезультирующегоСтолбца 
FROM имя_таблицы;
---
SELECT 
	CASE WHEN возраст < 18 THEN 'Несовершеннолетний' 
	WHEN возраст >= 18 THEN 'Взрослый' 
	END AS ГруппаВозраста 
FROM люди;
```
## Case в JOIN
```SQL
SELECT * FROM таблица1 
JOIN таблица2 ON 
	CASE 
		WHEN таблица1.столбец = 'условие' THEN таблица1.id = таблица2.соответствующий_id
		ELSE таблица1.id = таблица2.стандартный_id 
	END
```
# IF, Else
Для реализации условной логики используется IF.
Для того, чтобы начать блок кода используется при соблюдении условия используется Begin, для окончания END.

``` SQL
IF (условие) 
BEGIN 
	-- Код выполняется при соблюдении условия END
END
ELSE 
BEGIN 
	-- Код выполняется, если условие не выполнилось END
END
```

Если выполняется только одно условие, то достаточно одного IF.
Если несколько условий , то используем IF ELSE и блоки кода  оборачиваем в BEGIN END, чтобы понимать к какому условию относится блок кода.
## Отличие If, Else от Case
CASE используется в ситуациях, когда нужно оценить несколько условий в рамках одного запроса, а IF-THEN-ELSE — когда требуется выполнить разные блоки кода в зависимости от условия.
# If Exists
[основа](https://sky.pro/wiki/sql/if-exists-v-sql-server-vyborka-dannykh-s-usloviem/)
Конструкция **IF Exists** не рабочая в прямом смысле, поэтому используется конструкция 
When Exists
Then... Else...

```sql
SELECT 
	CASE 
		WHEN EXISTS (SELECT 1 FROM ВашаТаблица WHERE Условие) 
		THEN 'True'
		ELSE 'False'
	END AS Результат
```
