![[XKcuERF3nK8FJr1KjlNiwImieOhIRcVt-4HZECORnacJgB3qQAdK3XZxcBR_Eg5-qhoa-OWQgUZLqG6CePhLFYp6.jpg]]
Как работает вычитание?
Select * 
from A
left join B on A.key = B.key
where B.key IS NULL

Для этого необходимо понимать, как работает обычный **Left Join**
Select * 
from A
left join B on A.key = B.key

При обычном **Left Join** мы берём все строки из левой таблицы и складываем их со строками правой таблицы. Там где у правой таблицы значений нет, к нам прилетают Null.

| Таблица А.столбец | Таблица Б.столбец |
| ----------------- | ----------------- |
| Груша             | Фрукт             |
| Яблоко            | Фрукт             |
| Колбаса           | **Null**          |
Итого мы получаем такую картину
![[Pasted image 20250702101758.png]]


А затем мы берём наш базовый запрос и дополняем его WHERE, чтобы сделать вычитание

Select * 
from A
left join B on A.key = B.key
*where B.key IS NULL*

У нас остается только последняя строка с Null

| Таблица А.столбец | Таблица Б.столбец |
| ----------------- | ----------------- |
| Колбаса           | Null              |
![[Pasted image 20250702102016.png]]
Итого мы вычленили из первой таблицы все значения ключей, которых нет во второй таблице.