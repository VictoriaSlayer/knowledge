[[Олифер 3. Коммутация каналов и пакетов]]
[[Протоколы и все, что с ними связано]]
# Про сеть
Для связи устройств всегда должны быть предусмотрены внешние интерфейсы.

#Интерфейс - в широком смысле логическая/физическая граница между отдельными объектами, которые обмениваются информацией. Интерфейс задает параметры, процедуры и характеристики взаимодействия объектов.
# Порты
## Типы портов
Физический #интерфейс - (порт) определяется набором электрических связей и характеристиками сигналов. Обычно представляет собой разъем с контактами, каждый из которых имеет определенное назначение. Группа контактов для передачи данных, контакт для синхронизации и т.д. Разъемы соединяются кабелем соединяющим соответствующие контакты.  

Логический #интерфейс - #протокол набор информационных сообщений определенного формата, которыми обмениваются два устройства или программы, а также набор правил определяющих логику обмена этими сообщениями.
Логический порт - виртуальный разъем у которого нет физического устройства, а есть только число от 0 до 65535. Это адрес порта.

## Особенности портов
Представим, что в компьютере есть один физический разъем с воткнутым кабелем. Этот физический порт (кабель) использует множество программ на компьютере - телеграм, браузер, созвон и т.д. Чтобы при работе в сети программы и сервисы не путали между собой данные разработчики придумали логические-виртуальные порты. С технической точки зрения, порт это просто число, которое прикрепляется к пакету данных, чтобы программы понимали какой пакет данных к какой программе относится. Система смотрит присвоенный номер порта и отправляет этой программе данные.

Порт от адреса отделяется двоеточием:
127.0.0.1:1313
1313 - это порт адреса 127.0.0.1

Порты:
- от 0 до 1023 - закрепленные порты;
- от 1024 до 49151 - регистрируемые порты;
- от 49152 до 65535 - не присвоенные порты, динамические, личные и т.д.;
- 
Порты всегда железно связаны с определенными протоколами:
- 21 порт с протоколом ftp;
- 80 порт с протоколом http;
## Что можно делать с портами
- *Порт можно открыть* — чтобы система знала, куда отдавать данные, пришедшие по этому адресу;
- *Порт можно закрыть* — чтобы данные больше не передавались. Они будут игнорироваться;
- *Порт можно пробросить* — например, можно научить систему, что если запрос пришёл на порт 1212 — отправить его на порт 2121. Так устроены многие сетевые маршрутизаторы и, в частности, ваш интернет-провайдер;
- *Порты можно просканировать* — перебрать все числа от 0 до 65535, чтобы посмотреть, придёт ли с какого-нибудь из них ответ. Если придёт — на этом порте сидит какая-то программа;
- *Порт можно заблокировать* — сказать вашему роутеру на работе или дома, чтобы все запросы на определённый порт либо выбрасывались, либо переадресовывались;
- *Порт можно задать*: если вы знаете, что какой-то порт у вас заблокирован, а вам жуть как надо запустить программу — можно задать для этой программы другой порт и общаться через него. Не все программы это поддерживают;
- *Прослушивающий порт* — это порт, в котором компьютер активно ожидает входящие запросы на этом порту, разрешая эти соединения;

## Как порты аффектят на безопасность
Злоумышленники могут попытаться через сканирование портов найти уязвимые слушающие порты и начать атаку.
Брандмауэр/файерволл - программа которое определяет что можно делать с портами по действиям выше.

Пример:
В качестве примера используемых портов предположим, что компания хочет иметь веб-сайт, электронную почту и службу безопасной передачи файлов в Интернете. Его брандмауэр разрешает входящие подключения к портам 80 и 443 для веб-трафика, порту 25 для входящей электронной почты и порту 22 для FTP (SFTP) Secure Shell. Он перенаправляет эти порты на определенные серверы для каждого типа услуг. Брандмауэр заблокирует все остальные порты.

Таким образом, если сотрудник по ошибке попытается использовать FTP через порт 21 вместо SFTP, он будет заблокирован. Или, например, если злоумышленник попытается подключиться к порту 3389 для удаленного рабочего стола Windows, чтобы получить контроль над сервером, брандмауэр заблокирует соединение.


Интерфейс компьютер - компьютер позволяет двум компьютерам обмениваться информацией:
- сетевым адаптером или сетевой интерфейсной картой;
- драйвером сетевой интерфейсной карты - #драйвер программа управляющая работой сетевой карты.

# Снова про сеть
## Обмен данных между компьютерами
### Протокол
Чтобы приложения на разных компьютерах могли понимать друг друга необходимо оговорить форматы и последовательность сообщений, которыми приложения будут обмениваться. Тем самым определяется #протокол взаимодействия приложений.
Обмениваемые данные необходимо сопровождать доп. информацией для обоих приложений. При этом оба приложения должны быть активны.
Сам принцип взаимодействия приложений с участием ОС, буфера ОС, драйвером сетевой карты лучше читать в книге с42-48, слишком много описывать.
## Сетевые службы и сервисы
Более эффективным является подход, когда функции обмена данными исключаются из приложений и оформляются в формате клиента-сервера.
На компьютере А есть множество приложений - клиентов, которые могут использовать на компьютере Б приложение - сервер.
#Клиент - модуль предназначенный для формирования и передачи сообщений запросов к ресурсам удаленного компьютера от разных приложений с последующим приемом результатов из сети и передачей их соответствующим приложениям.
### Сервер
#Сервер -  модуль, который постоянно ожидает прихода из сети запросов от клиентов и приняв запрос, пытается его обслужить, как правило с участием локальной ОС. Один сервер может обслуживать запросы сразу нескольких клиентов.

Как может выглядеть сервер?
Сервер (он же - серверное оборудование) – это оборудование, внешне представляющее собой системный блок (так же сервером может выступать и сам системный блок) . На сервере размещаются серверные программы (FTP-сервер, HTTP-сервер, MySQL-сервер, DNS-сервер и т. п. ) , которые работают на одном IP-адресе, но на разных портах (напр. доступ к FTP будет по порту 21: xxx.xxx.xxx.xxx:21 (xxx.xxx.xxx.xxx – IP адрес, выдаваемый провайдером интернета) , к HTTP-серверу – по порту 80 (xxx.xxx.xxx.xxx:80)). Можно покупать сервера и устанавливать их на удобном для вас месте, а можно арендовать их в дата-центре. Цена за разные серверные программы будет, обычно, разная. Серверное оборудование позволяет работать серверным программам. Серверные программы же взаимодействуют с пользователем.

#Сетевая_служба - пара клиент сервер предоставляющая доступ к конкретному типу ресурса компьютера. Каждая служба связана с определенным типом ресурсов компьютера.
#Сервис - услуга предоставляемая службой. Для поиска и просмотра информации в интернете используется веб-служба состоящая из веб-сервера и клиентской программы веб-браузера.
## Сетевая ОС
Сетевая ОС помимо доступа к локальным ресурсам дает доступ к ресурсам сети.
Бывают различные ОС - клиентские (преимущественно для клиентов), серверные - ориентированные на обработку запросов из сети к ресурсам своего компьютера.
## Сетевые приложения
*Локальное приложение* - целиком выполняется на компьютере. Для этого приложения не требуется никаких сетевых ресурсов.
*Централизованное сетевое приложение* - целиком выполняется на данном компьютере, но обращается в процессе своей работы к ресурсам других компьютеров сети.
### Распределенное сетевое приложение
*Распределенное сетевое приложение* - состоит из нескольких взаимодействующих частей, каждая из которых выполняет какую-то определенную законченную работу по решению прикладной задачи. Причем каждая часть выполняется как правило на отдельном компьютере сети. Части приложения взаимодействуют друг с другом используя сетевые службы и транспортные средства ОС. Распределенное приложение имеет доступ ко всем ресурсам сети.

Преимущество приложения - возможность распараллеливать вычисления, а также выполнять специфическую работу. Отдельно вычисления, отдельно транзакции, отдельно СУБД. Однако, чтобы добиться всех этих преимуществ необходимо решить кучу вопросов - как делить приложение, как организовать взаимодействие частей, что делать в случае сбоев и т.д.

Удаленный рабочий стол, служба печати, файловая служба - это все распределенные приложения.

# Топология физических сетей
Полносвязная топология;
Неполносвязная топология:
- ячеисчтая;
- звездообразная;
- дерево;
- шина;
- смешанная;
![[Pasted image 20250103152831.png]]
# Адресация узлов сети
Уникальный адрес - используется для идентификации отдельных интерфейсов.
Групповой адрес - идентифицирует сразу несколько интерфейсов, данные помеченные групповым адресом доставляются каждому из узлов входящих в группу.
Широковещательный - информация должна быть доставлена всем.
Адрес произвольной рассылки - задает группу адресатов.

Адреса могут быть числовым - 129.26.255.255 или символьными.

Множество адресов называется адресным пространством. Адресное пространство может иметь плоскую или иерархическую архитектуру:
- плоская - пространство не структурировано. Примером является #Mac-адрес предназначенный для однозначной идентификации сетевых интерфейсов в локальных сетях. Такой адрес обычно используется аппаратурой. При замене аппаратуры изменяется и сетевой адрес;
- иерархическая - пространство структурируется в виде вложенных друг в друга подгрупп, которые последовательно сужая адресуемую область определяют отдельный сетевой интерфейс.
  Сетевые IP адреса являются примером двухуровневой организации. Первый уровень - номер сети, второй уровень номер узла;
Как правило сетевой интерфейс может иметь несколько адресов-имен, каждый задействуется в той ситуации, которая наиболее удобна.
Преобразование адресов из одного в другой называют протоколом разрешения адреса.

Централизованный подход - в сети выделяется несколько компьютеров серверов имен - DNS, которые хранят имена.
Распределенный подход - компьютер сам хранит все назначенные ему адреса.

# Коммутация
#Коммутация - соединение конечных узлов через сеть транзитных улов.
#Маршрут - последовательность узлов лежащих на пути от отправителя к получателю.
![[Pasted image 20250103153631.png]]
## Задачи коммутации
1. Определение информационных поток, для которых требуется проложить маршруты
2. Маршрутизация потоков.
3. Продвижение потоков - распознавание потоков, их локальная коммутация в каждом транзитном узле.
4. Мультиплексирование и демультиплексирование.

Информационный поток/поток данных - непрерывная последовательность данных, объединенных набором общих признаков, выделяющих эти данные из общего сетевого трафика. Этот  можно представить в виде нескольких подпотоков.

## Маршрутизация
Включает в себя две задачи:
- определение маршрута;
- оповещение сети о выбранном маршруте;
Определение маршрута - выбор оптимального маршрута в топологии сети через множество транзитных узлов.

## Продвижение данных
Коммутатор - устройство чьим функциональным назначением является коммутация.
Коммутация - соединение интерфейсов узлов сети для передачи данных.
![[Pasted image 20250103160145.png]]
Коммутатор должен распознать подпотоки в общем потоке, чтобы вычленить куда дальше передавать данные.
*ДеМультиплексирование* - разделение суммарного потоко на несколько составляющих.
*Мультиплексирование* - образование из нескольких отдельных потоков общего потока.
