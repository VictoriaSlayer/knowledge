[2. Общие принципы построения сетей]()

TCP/IP - стек протоколов, которые задают правила передачи данных по Сети. Так как бал здесь правят протоколы TCP и IP, в честь них и назвали всю модель.
## Источники
[https://www.youtube.com/watch?v=2I1HnSN1H9o&ab_channel=ListenIT](https://www.youtube.com/watch?v=2I1HnSN1H9o&ab_channel=ListenIT)
[https://skillbox.ru/media/code/model-tcpip-chto-eto-takoe-i-kak-ona-rabotaet/](https://skillbox.ru/media/code/model-tcpip-chto-eto-takoe-i-kak-ona-rabotaet/)
[http://www.ofnet.ru/osnovy-interneta/tcpip/](http://www.ofnet.ru/osnovy-interneta/tcpip/)

## Типы протоколов
Протоколов большое количество, все они заточены под определённые задачи.
- TCP - отвечает за обмен данными. Он управляет их отправкой и следит за тем, чтобы они дошли до получателя в целости;
- IP - отвечает за адресацию. Его задача — связывать друг с другом устройства и нарезать данные на пакеты для удобной отправки. Чтобы протокол мог быстро найти дорогу от одного компьютера к другому, придумали IP-адреса — уникальные идентификаторы, которые есть у каждого устройства в Сети. Эти два протокола работают в связке: IP строит маршрут, а TCP контролирует, чтобы всё передавалось правильно;
- FTP – file transport protocol. Протокол передачи файлов;
- SMB – протокол сродни ftp;
- HTTP помогает браузеру формировать запросы к серверу;
- FTP — скачивать файлы;
- UDP — быстро передавать видео, музыку и игры, но с возможными потерями по пути;
- Wi-fi – тоже протокол;
- SSL, TLS— протокол шифрования, нужен для безопасной передачи или хранения данных;

Как правило протоколы необходимо рассматривать комплексно, т.к. они работают в связках.
![[Pasted image 20240629153522.png]]

### Пример №1. Общая работа сети.
У каждого компьютера свой адрес в сети. Каждый компьютер это узел или хост. У него имеется свой IP адрес. Информацией обмениваются не компьютеры, а приложения на них, поэтому нужно знать номер приложения (почтовый сервер, веб сервер и т.д.) – его порт. Большинство серверных приложений имеет стандартные номера портов.

Почтовый сервис – 25
Веб сервис – 80
ФТП – 21

В компьютерных сетях пакет – содержит передаваемые данные и адреса получателя и отправителя.
Сокет – комбинация ip адрес и порт.
![[Pasted image 20240629153726.png]]

В пакете также присутствует служебная информация. 
Взаимодействие осуществляется в формате – клиент/сервер.Клиент – запрашивает информацию, сервер принимает запрос, обрабатывает его и посылает результат. Номера портов на клиенте не фиксированные, как у сервера, а назначаются ОС динамически. Фиксированные серверные порты как правило имеют номера до 1024, а клиентские начинаются после 1024.
### DNS
Любой цифровой IP адрес можно связать с буквенно-цифровым именем. Вместо 82.146.49.55 можно использовать имя ofnet.ru. Преобразованием доменного имени в цифровой адрес занимается сервис доменных имен – DNS. Domain Name Server.
Провайдер на бумаге - явно или через автоматическую настройку - неявно представляет вам IP адрес сервера имен. На компьютере с этим IP адресом работает приложение (сервер имен), которое знает все доменные имена в интернете и соответствующие им IP адреса.
![[Pasted image 20240629153845.png]]

### Пример №2. Общий принцип работы клиент/сервисной архитектуры.
В браузере мы набираем доменное имя (URL) сайта - www.ofnet.ru, получаем страницу сайта.
IP adress нашего компьютера: 91.76.65.216
Браузер: IE
DNS сервер (стрима): 195.34.32.116
Страница которую мы хотим открыть: www.ofnet.ru

ОС отправляет пакет с запросом DNS серверу на сокет 195.34.32.116:53 !!! И DNS обработав запрос, возвращает IP адрес который соответствует введенному имени - 82.146.49.55.
Далее наш компьютер устанавливает соединение с портом 80 компьютера 82.146.49.55 и посылает пакет с запросом на получение страницы www.ofnet.ru
Приняв от нас запрос веб-сервер обрабатывает его и в нескольких пакетах посылает нам страницу на HTML. Браузер получив HTML отображает её.

Клиент – удобный GUI для обычного пользователя для выполнения своих задач.

Сервер – мозги, где находится основная логика, которая производит основные операции и при необходимости обращается к БД. Логику удобнее хранить на сервере, т.к. к нему куча клиентов посылает запросы и проще поменять логику на серваке, чем на каждом из клиентов.
## Виды портов и IP адреса
![[Pasted image 20240629155313.png]]
![[Pasted image 20240629155322.png]]

## Локальные сети
Что такое маска подсети и шлюз (роутер, маршрутизатор)?

Компьютеры объединяются в локальные сети. В локальной сети компьютеры напрямую видят только друг друга. Локальные сети соединяются друг с другом через шлюзы (роутеры, маршрутизаторы).
Маска подсети предназначена для определения - принадлежит ли компьютер-получатель к этой же локальной сети или нет. Если принадлежит, то пакет передается ему напрямую, в противном случае пакет отправляется на шлюз по умолчанию, который далее отправляется по известным ему маршрутам, передает пакет в другую сеть.

Про FTP протокол
![[Pasted image 20240629160240.png]]
FTP работает в режиме клиент/сервер, клиент может работать с файловой системой сервера. С файлами могут происходить операции CRUD.

## Резюмирование
TCP/IP - набор сетевых протоколов. Передаваемый пакет проходит несколько уровней (как в почте - пишем письмо, помещаем в конверт с адресом, затем на почте ставим штамп и т.д.).
IP протокол - протокол сетевого уровня. Его задача доставка IP-пакетов от отправителя к получателю. Кроме собственных данных, пакеты этого уровня имеют IP-адрес отправителя и получателя. Номера портов на сетевом уровне не используется, а также на этом уровне неизвестно, был ли пакет доставлен.
Над транспортным уровнем находится прикладной уровень, на котором работают такие протоколы как HTTP, FTP, и т.д. Например HTTP и FTP используют надежный протокол TCP. DNS сервер работает через UDP.

TCP и UDP - протоколы транспортного уровня. Он находится над сетевым. На нем к пакету добавляются порты отправителя и получателя.
TCP - протокол с установлением соединения с гарантированной доставкой пакетов. Если пакет не дошел, то он посылается повторно.
UDP - протокол без установления соединения и с негарантированной доставкой пакетов.


## SSL
Secure sockets layer
https://skillbox.ru/media/code/protokol-ssl-chto-eto-kak-rabotaet-i-zachem-nuzhen/
### SSL протокол
Протокол который шифрует и защищает данные во время их передачи по интернету.
В модели TCP/IP протокол находится на прикладном уровне, а в [OSI](https://skillbox.ru/media/code/chto-takoe-model-osi-i-zachem-ona-nuzhna-prepariruem-sloyenyy-pirog-interneta/?utm_source=media&utm_medium=link&utm_campaign=all_all_media_links_links_articles_all_all_skillbox) — между транспортным и прикладным. Здесь SSL отвечает за шифрование/дешифрацию и создание сессий, в рамках которых происходит общение между клиентом и сервером.

Сейчас вместо SSL используют TSL.

Главная задача SSL— проверить подлинность сайта и установить с ним защищённое соединение. Каждый раз, когда вы заходите на какую-то страницу, браузер убеждается в том, что сайт настоящий, а не поддельный. А также узнаёт, можно ли безопасно передавать сайту личные данные.

Обычно, когда вы заходите на сайт, браузер использует протокол HTTP для передачи данных между клиентом и сервером. Это незащищённый протокол, а значит, данные перехватить может кто угодно. Поэтому поток данных, передаваемых по HTTP придумали шифровать протоколом SSL. Так появился стандарт HTTPS, где S означает secure. По сути, всё его отличие от предшественника как раз и состоит в использовании протокола SSL.

Иногда злоумышленники создают веб-сайты, имитирующие существующие, чтобы обманом заставить людей сделать покупку или выполнить вход на фишинговый сайт. [Фишинговый сайт](https://www.kaspersky.ru/resource-center/preemptive-safety/phishing-prevention-tips) может получить SSL-сертификат и, следовательно, зашифровать весь трафик, проходящий между сайтом и пользователями. Растущая доля фишинговых атак происходит на HTTPS-сайтах. Происходит обман пользователей, которых успокаивает наличие значка замка.
### SSL сертификат
SSL-протокол и SSL-сертификат работают в паре, но выполняют разные функции.

**Протокол SSL** определяет последовательность действий, которые нужно совершить, чтобы установить защищённое соединение между клиентом и сервером.

**Сертификат SSL** — это электронный документ. Он-то и содержит информацию о сайте, которая нужна для установки защищенного соединения. Туда входят:

- данные о владельце сертификата;
- публичный ключ для шифрования;
- подлинная подпись.

## SSH
https://habr.com/ru/articles/724762/
**(Secure SHell - защищенная оболочка)** — сетевой **протокол** прикладного уровня, предназначенный для безопасного удаленного доступа к **различным системам (Linux, Windows, Mac)**.

## SSO
[https://habr.com/ru/companies/nixys/articles/563244/](https://habr.com/ru/companies/nixys/articles/563244/)
[https://www.youtube.com/watch?v=Jwi9l8oslZo&ab_channel=ListenIT](https://www.youtube.com/watch?v=Jwi9l8oslZo&ab_channel=ListenIT)

SSO Технология единого входа (Single sign-on SSO) — метод аутентификации, который позволяет пользователям безопасно аутентифицироваться сразу в нескольких приложениях и сайтах, используя один набор учетных данных.

У Олиферов - в случае комплексных систем пользователь тратит за год значительное время на вход во множество систем (44 часа). Поэтому SSO как один из вариантов решения.
Цель SSO - создание такого порядка аутентификации, при котором пользователь выполняет вход в сеть только один раз, доказывая свою аутентичность с помощью любого способа аутентификации, а затем результат этой аутентификации прозрачным для пользователя способом применяется каждый раз, когда ему нужно доказывать свою аутентичность другому серверу или приложению.
![[Pasted image 20250118205631.png]]

## Токены

[https://habr.com/ru/articles/593191/](https://habr.com/ru/articles/593191/)

Аутентификация на основе токенов упрощает процесс аутентификации для уже известных пользователей.

Могут быть аппаратные (физические),  программные (код).

Интересуют программные. В начале происходит аутентификация через логин/пароль, далее система присылает токен и пользователь имеет доступ к различным данным исходя из ограничений на токене по которым происходит сверка.

Имеется большо количество различных токенов. Одноразовые, многоразовые, составные, токены генерирующиеся моб. устройством, а не сервером. Токены должны использоваться в рамках двухэтапной, многоэтапной аутентификации, а не как серебряная пуля.
