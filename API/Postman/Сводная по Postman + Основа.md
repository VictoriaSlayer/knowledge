Материла в сети много. Материал для меня не структурированный, по различным источникам отсутствуют куски значимой для меня информации, чтобы составить полную картину. Поэтому придется критическую массу набирать самому.

Основой служат:
https://habr.com/ru/companies/vk/articles/750096/ - обобщающий материал, в принципе описаны все основы требуемые для работы и рассказанные в начальном видео одного из курсов.

CURL - позволяет копировать сразу всю информацию по запросу. Endpoint, Header, Params, Authorization, Body. Postman через команду import сразу вставляет CURL и так просто удобно.
# Список public API для практики
- [reqres](https://reqres.in/) 
- [httpbin.org](http://httpbin.org/#/)
- [Petstore](https://petstore.swagger.io/)
- [Cat facts](https://catfact.ninja/#/Facts)
- [Bored API](https://www.boredapi.com/)
- [agify.io](https://agify.io/)
- [nationalize.io](https://nationalize.io/)
- [Random dog images](https://dog.ceo/dog-api/documentation/sub-breed)

![[Pasted image 20250315173117.png]]
Документация по API пишут в сваггере. У одних и тех же методов может быть куча версий.

![[Pasted image 20250315220254.png]]
*Код на бэке для API* с вариантами ответов для клиента.
Код на 118 строчке отправляет запрос в БД
![[Pasted image 20250315220502.png]]
Достань аналитику из БД по UserID.


# Токен
Токен возвращает сервер. Токен хранится в клиенте в том или ином виде (cookie и т.д.).
Токен можно передавать на сервер через вкладку *Headers*, либо через вкладку *Authorization*. 
Во вкладке Authorization мы выбираем тип авторизации. В этом случае всю инфу нам должен сказать разработчик - какой тип токена выбрать и какие его параметры. Ну и далее этот токен в любом случае передается через параметры в *Headers*

# Различные возможности
https://www.youtube.com/watch?v=M1kwub3H0AI
Создание различных переменных.
Просмотр истории запросов.
Экспорт запросов в различные виды ЯП.
Отправлять сразу коллекцию запросов на тестирование.
## Что может передавать Postman
Куча различных вариаций. Перед тем как передавать всегда нужно ознакомиться с докой.
### Query параметры
Параметры передающиеся в теле запроса. Передаются во вкладке Params.
![[Pasted image 20250304225952.png]]

*Как это выглядит со стороны Swagger*
![[Pasted image 20250401070444.png]]
### Path

*Как это выглядит со стороны Swagger*
Параметры внутри URL
![[Pasted image 20250401070702.png]]
### Body
В Body мы как правило передаем JSON

*Как это выглядит со стороны Swagger*
![[Pasted image 20250401070856.png]]
Из устаревших вариантов мы можем передавать файлы и данные из формы. Примеры ниже.
#### Form-Data
##### Файлы
Отправляют контент-файлы который нужно особым образом кодировать
![[Pasted image 20250401071747.png]]
##### Текстовая информация
Передаем данные из заполняемой формы через Form Data
![[Pasted image 20250401071653.png]]
*Как это выглядит со стороны Swagger*
![[Pasted image 20250401071414.png]]
### Header
*Как это выглядит со стороны Swagger*
![[Pasted image 20250401072207.png]]
Какой ключ передавать в API также ищем в документации, как правило должен быть указан.
![[Pasted image 20250401072444.png]]
## Environment
Environment - в создаваемых окружениях мы можем создавать переменные.
![[Pasted image 20250304234729.png]]
В зависимости от выбранного окружения доступен различный пул переменных.
## Переменные
Переменные - сродни переменным в коде. Удобно потом использовать везде.
![[Pasted image 20250304234856.png]]
Глобальные переменные доступны из каждого окружения.
![[Pasted image 20250304235231.png]]
![[Pasted image 20250304235551.png]]
Добавить переменную на уровне коллекции
*Initial value* - изначально установленное значение в коде, допустим первоначальный токен
*Current value* - значение полученное в результате тестов.
### Простановка переменной автоматически
В ситуациях, когда к нам приходят динамические ответы - токены которые необходимо проверять и т.д. 
![[Pasted image 20250318070240.png]]

var jsonTest = pm.response.json();

// Шаг 1. создали переменную jsonTest в которую сохраняем ответ/JSON по нашему запросу

pm.environment.set("Star_Wars_Variable", jsonTest.name);

// Шаг 2. после того, как получили ответ из шага 1 Postman в Environment создает переменную Star_Wars_Variable в которую сохраняет значение из переменной jsonTest.name
## Визуализация массивов JSON
В целом особо не нужно, но если припечет
https://youtu.be/M1kwub3H0AI?t=6043
## Сохранение response
Сохранение ответов в коллекцию
## Перехват запросов с браузера
https://youtu.be/M1kwub3H0AI?t=6995
Утилита Postman Interceptor позволяет перехватывать запросы с сайта и отображать их в Postman, чтобы не переносить вручную.
## Mock сервер
Фейковый сервер создаваемый постманом, когда API еще не создано, но договорились с разработчиком какие будут endpoint и что будущий сервер будет возвращать. Чтобы уже можно было начинать тестировать.
https://youtu.be/M1kwub3H0AI?t=7495
[Как создать](https://www.youtube.com/watch?v=hToizGja6jM&ab_channel=QATech)
[Как создать 2](https://habr.com/ru/companies/otus/articles/857112/)
# Тесты
Все тесты написано при помощи библиотеки CHAI, поэтому варианты тестов надо искать там.
https://www.chaijs.com/api/bdd/
https://www.postman.com/postman/test-examples-in-postman/collection/g12sno6/chai-js-tutorial

*Chai* используется когда необходимо написать тест с проверкой утверждения.
*Postman* для всего остального.

## Пример
pm.test("Имя моего теста", function () {

    var jsonData = pm.response.json();
*Переменная куда сохраняется ответ в JSON*  

    pm.expect(jsonData.consumables).to.be.a('string');
*Проверочный тест, проверяющий, что ответ из JSON содержит свойство consumables и это строка*
    pm.expect(jsonData).to.be.a('object')
*Проверочный тест, что JSON это объект*
});

## Рандомные данные для тестов
Документация по динамическим переменным - https://learning.postman.com/docs/tests-and-scripts/write-scripts/variables-list/
{{$Имя_переменной_генерирующей_случайное_значение}}
![[Pasted image 20250318070858.png]]
