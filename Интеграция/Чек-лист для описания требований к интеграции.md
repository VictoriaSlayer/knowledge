Необходимо объединить все данные из всей группы статей, т.к. требования разнятся от типа интеграции. И уже столкнувшись с интеграциями на практике понял, что список требований у меня явно не полный. 
[[Интеграция. Технологии.canvas|Интеграция. Технологии]]
[[Интеграция. Признаки хорошей интеграции]]
[ссылка](https://www.youtube.com/watch?v=7JwgE3M0a80)
https://habr.com/ru/companies/oleg-bunin/articles/534090/ 
Обмен данными между системами или сервисами

Этапы интеграционного анализа:
- концепция;
- проектирование;
- техническая детализация;

#### Концепция
- Цели и задачи интеграции в рамках бизнес процесса;
- архитектурный паттерн интеграции;
- мастер системы и системы потребители;

#### Проектирование
- Диаграмма потока данных;
- Объектная модель;
- Таблица данных;

#### Техническая детализация
- алгоритмы преобразований;
- валидация;
- требования к журналированию;

лекция по большей части по Технической детализации

#### Настройки механизма интеграции
##### Настройки и расписание запуска
Тип взаимодействия:
- файловый обмен;
- веб-сервис;
- интеграционная шина;
- БД;

В основном сейчас используются веб-сервисы. В зависимости от типа подключения требуются разные методы подключения:
адрес папки;
веб адрес, название метода, логин пароль, почта и т.д.;

##### Триггеры для интеграции
Описываем условия запуска - пользователь инициировал, сущность сменила статус и т.д.

##### Расписание запуска
Периодичность, интервал, возможность отключения и принудительного запуска

Если несколько систем и мы продумываем с каким расписанием запускать потоки, то необходимо заранее подумать о порядке получения сущностей и их идентификации. Расписание должно быть выставлено последовательно.

#### Где забираем данные
Где забираем данные - название папки/сервиса, описать шаблон названия.
Правила - соответствие названия шаблону.
Я так понимаю имеется ввиду что данные будут забираться через составленный запрос и этот запрос должен составляться по шаблону и он должен быть нам понятен.

##### Если забираем данные из сервиса
Описываем место, где забираем данные, что делаем если не достучались:
- через сколько отправляем повторный запрос;
- сколько есть попыток;

- Обработка дублей (чаще всего при файловом обмене). Перезапись данных или валидны только первые файлы. Выясняем это у заказчика;

Порядок хранения файлов, время хранения. 

#### Анализ данных
Анализ данных, что и куда мы забираем. Пример.

#### Описание
Описание формата и структуры данных.

#### Проверки
Описываем действия если что-то не совпадает:
- Название шаблона;
- формат файла;
- нарушена структура и порядок требования атрибутов;
- обязательные реквизиты не заполнены;
- пустой файл;
Повторяем аналогичные действия в случае обратной интеграции.

#### Шаблон названия пример

имеются информативные и неинформативные шаблоны по которым будут передаваться данные.

Неинформативный
название-передаваемого-интерфейса__дата-формирования-файла__время-формирования-файла

Информативный
название-передаваемого-интерфейса__дата-формирования-файла-YY-MM-DD__время-формирования-файла-HH-MM-SS

#### Описание структуры данных

| №   | Атрибут | Тэг | Формат данных | Описание | Обязательность |
| --- | ------- | --- | ------------- | -------- | -------------- |
 
Используем Swagger для проверки актуальности документации, постановки задачи и тестирования.

#### Валидация и алгоритмы преобразования
После этапа описания проверки данных и структуры формата переходим к валидации и алгоритмам преобразования:
- преобразование сущности. Проверка - наличие сущности в системе, целостность сущности, данных. Действия - как обходить то или иное ограничение. Например - приходят данные по неактивной сущности. Принимать или не принимать их. Если принимать, то что делать с блоками связанными с этой сущностью. Должны ли они дальше принимать эту инфу и т.д. Для каждого варианта прописываем свой алгоритм зависящий от действия, логики домена и т.д.;
- ограничения - системные и архитектурные;
- тестирование;

#### Загрузка из нескольких источников

Диаграмма потоков данных.
Разделение потоков данных на уровне структуры
Как мы разделяем данные которые приходят из разных структур? Например из 1С пришло 30р, из другой системы пришло 30р, вручную пользователь ввёл 30р. Как мы будем вести учет 90р?
Необходимо прописывать историю каждой транзакции.
Как мы разделяем эти данные на уровне интерфейса.

#Диаграмма_потоко_данных!!! Применить её в задаче по перераспределению объемов.

#### Ограничения
Вести чек-лист по ограничениям. Как для текущего так и для последующих проектов.
Системные и архитектурные.

Мы не можем принимать файлы больше определенного объема;
Мы не можем принимать отрицательные числа и т.д. При этом может случиться ситуация, когда отрицательное число все равно получится.;
Не совпадает структура данных. Мы храним итоговую сумму, а теперь надо начать хранить корректировки. Необходимо заводить новую сущность или хранить где-то данные во внутренних таблицах БД временно и т.д.

#### Логирование
Информация о запусках
Время следующего запуска
Выполняющийся запуск на текущий момент
История выполненных заданий

Дата и время запуска
Длительность выполнения
Наименование системы
Детализация в разрезе каждого запуска

Стандартная практика - возвращаться информация об ошибке, предупреждении. Предупреждения не настолько критичны, как если заказчик видит сообщения об ошибках.

#### Разграничение прав

Кто, что делает в какой ситуации.
Администратор может раздавать права в какой ситуации?